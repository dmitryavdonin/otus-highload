#!/usr/bin/env python
import uuid
import random
import requests
from datetime import datetime
import sys

# API endpoint
API_URL = "http://localhost:9000/user/register"
DEFAULT_PASSWORD = '12345'  # Default password

# Lists for random data generation
first_names = [
    "Александр", "Алексей", "Анатолий", "Андрей", "Антон", "Аркадий", "Артем", "Борис", 
    "Вадим", "Валентин", "Валерий", "Василий", "Виктор", "Виталий", "Владимир", "Владислав", 
    "Геннадий", "Георгий", "Григорий", "Даниил", "Денис", "Дмитрий", "Евгений", "Егор", 
    "Иван", "Игорь", "Илья", "Кирилл", "Константин", "Леонид", "Максим", "Михаил", 
    "Никита", "Николай", "Олег", "Павел", "Петр", "Роман", "Руслан", "Сергей", 
    "Станислав", "Степан", "Тимофей", "Федор", "Юрий", "Ярослав",
    "Анна", "Алена", "Алина", "Алиса", "Анастасия", "Валентина", "Валерия", "Вера", 
    "Виктория", "Галина", "Дарья", "Диана", "Евгения", "Екатерина", "Елена", "Елизавета", 
    "Инна", "Ирина", "Карина", "Кристина", "Ксения", "Лариса", "Любовь", "Людмила", 
    "Маргарита", "Марина", "Мария", "Надежда", "Наталья", "Нина", "Оксана", "Ольга", 
    "Полина", "Светлана", "София", "Татьяна", "Ульяна", "Юлия", "Яна"
]

last_names = [
    "Иванов", "Смирнов", "Кузнецов", "Попов", "Васильев", "Петров", "Соколов", "Михайлов", 
    "Новиков", "Федоров", "Морозов", "Волков", "Алексеев", "Лебедев", "Семенов", "Егоров", 
    "Павлов", "Козлов", "Степанов", "Николаев", "Орлов", "Андреев", "Макаров", "Никитин", 
    "Захаров", "Зайцев", "Соловьев", "Борисов", "Яковлев", "Григорьев", "Романов", "Воробьев", 
    "Сергеев", "Кузьмин", "Фролов", "Александров", "Дмитриев", "Королев", "Гусев", "Киселев",
    "Иванова", "Смирнова", "Кузнецова", "Попова", "Васильева", "Петрова", "Соколова", "Михайлова", 
    "Новикова", "Федорова", "Морозова", "Волкова", "Алексеева", "Лебедева", "Семенова", "Егорова", 
    "Павлова", "Козлова", "Степанова", "Николаева", "Орлова", "Андреева", "Макарова", "Никитина", 
    "Захарова", "Зайцева", "Соловьева", "Борисова", "Яковлева", "Григорьева", "Романова", "Воробьева", 
    "Сергеева", "Кузьмина", "Фролова", "Александрова", "Дмитриева", "Королева", "Гусева", "Киселева"
]

cities = [
    "Москва", "Санкт-Петербург", "Новосибирск", "Екатеринбург", "Нижний Новгород", 
    "Казань", "Челябинск", "Омск", "Самара", "Ростов-на-Дону", "Уфа", "Красноярск", 
    "Пермь", "Воронеж", "Волгоград", "Краснодар", "Саратов", "Тюмень", "Тольятти", 
    "Ижевск", "Барнаул", "Ульяновск", "Иркутск", "Хабаровск", "Ярославль", "Владивосток", 
    "Махачкала", "Томск", "Оренбург", "Кемерово", "Новокузнецк", "Рязань", "Астрахань", 
    "Набережные Челны", "Пенза", "Липецк", "Киров", "Чебоксары", "Тула", "Калининград"
]

def generate_random_date(start_year=1950, end_year=2005):
    start_date = datetime(start_year, 1, 1)
    end_date = datetime(end_year, 12, 31)
    return start_date + (end_date - start_date) * random.random()

def generate_user_data():
    first_name = random.choice(first_names)
    second_name = random.choice(last_names)
    birthdate = generate_random_date().strftime('%Y-%m-%d')
    city = random.choice(cities)
    password = DEFAULT_PASSWORD
    return {
        "first_name": first_name,
        "second_name": second_name,
        "birthdate": birthdate,
        "biography": "Пользователь не заполнил информацию о себе",
        "city": city,
        "password": password
    }

def register_users(num_users):
    for _ in range(num_users):
        user_data = generate_user_data()
        response = requests.post(API_URL, json=user_data)
        if response.status_code == 200:
            print(f"User registered: {user_data['first_name']} {user_data['second_name']}")
        else:
            print(f"Failed to register user: {response.text}")

if __name__ == "__main__":
    num_users = int(sys.argv[1]) if len(sys.argv) > 1 else 100
    register_users(num_users)