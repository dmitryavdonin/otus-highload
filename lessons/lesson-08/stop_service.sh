#!/bin/bash

# ==============================================================================
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ docker-compose (–î–ó-8)
# ==============================================================================

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m'

COMPOSE_FILE="deploy/docker/docker-compose.yml"

echo -e "${BLUE}üöÄ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ docker-compose...${NC}"
echo "=================================================="

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Docker –∏ Docker Compose
if ! command -v docker &> /dev/null || ! command -v docker-compose &> /dev/null; then
    echo -e "${RED}‚ùå Docker –∏–ª–∏ Docker Compose –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.${NC}"
    exit 1
fi

# –í—ã–ø–æ–ª–Ω—è–µ–º docker-compose down
docker-compose -f $COMPOSE_FILE down --remove-orphans

if [ $? -ne 0 ]; then
    echo -e "${RED}‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–µ—Ä–≤–∏—Å–æ–≤.${NC}"
    exit 1
fi

echo "=================================================="
echo -e "${GREEN}‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —É—Å–ø–µ—à–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ —É–¥–∞–ª–µ–Ω—ã.${NC}"
echo "" 